extends layout.pug
block content

    //- Layout    
    
    //- Top bar
    include topNavbar.pug

    //- Left bar
    include leftNavbar.pug
        
    //- Page Content
    .card.card1
        form(action="/newPost" method="POST")
            .card-header
                ul#myTab.nav.nav-tabs.card-header-tabs(role="tablist")
                    li.nav-item
                        a#posts-tab.nav-link.active(data-toggle="tab" href="#posts" role="tab" aria-controls="posts" aria-selected="true")
                            | Fazer uma publicação
                    li.nav-item
                        a#images-tab.nav-link(data-toggle="tab" role="tab" aria-controls="images" aria-selected="false" href="#images") Imagens
                    li.nav-item
                        a#pdfs-tab.nav-link(data-toggle="tab" role="tab" aria-controls="pdfs" aria-selected="false" href="#pdfs") PDF's
            .card-body
                #myTabContent.tab-content
                    #posts.tab-pane.fade.show.active(role="tabpanel" aria-labelledby="posts-tab")
                        .form-group
                            label.sr-only(for="message")
                            input#message.form-control(type="text" name="description" rows="3" placeholder="O que estás a pensar?" required)
                    #images.tab-pane.fade(role="tabpanel" aria-labelledby="images-tab")
                        .form-group
                            .custom-file
                                input#customFile1.custom-file-input(type="file")
                                label.custom-file-label(for="customFile1") Carregar imagem
                        .py-4
                    #pdfs.tab-pane.fade(role="tabpanel" aria-labelledby="pdfs-tab")
                        .form-group
                            .custom-file
                                input#customFile2.custom-file-input(type="file")
                                label.custom-file-label(for="customFile2") Carregar PDF
                        .py-4
                .btn-toolbar.justify-content-between
                    .btn-group
                        select.form-control(name="public" id="public" required)
                            button#btnGroupDrop1.btn.btn-link.dropdown-toggle(type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false")
                                i.fa.fa-globe
                                .dropdown-menu.dropdown-menu-right(aria-labelledby="btnGroupDrop1")
                                    .dropdown-item
                                        i.fa.fa-globe
                                            option(value="public" selected)
                                            |  Público
                                    .dropdown-item
                                        i.fa.fa-users
                                            option(value="private")
                                            |  Amigos

                                    .dropdown-divider
                                    each group in user.groups
                                        .dropdown-item= group.name
                                            option(type="text" name="group" value=`${group.name}`)
                    
                    .btn-group
                        button.btn.btn-primary(type="submit") Partilhar


    if (posts.length > 0)
        each post in posts
            .card.card2.mt-4.mb-4
                .card-header
                    .d-flex.justify-content-between.align-items-center
                        .d-flex.justify-content-between.align-items-center
                            a.mr-2(href=`/profiles/${post.author.email}`)
                                img.rounded-circle(width="45" src=`${post.author.avatar}` alt="")
                            .ml-2
                                .h5.m-0
                                    a(href=`/profiles/${post.author.email}`)= post.author.name
                                .h7.text-muted
                                    span= post.author.course

                .card-body
                    .text-muted.h7.mb-2
                        i.fa.fa-clock-o= post.date
                    p.card-text= post.description

                //- COMMENTS
                each comment in post.comments
                    .card-footer.ml-5.mr-5.mt-3
                        .card-header
                            .d-flex.justify-content-between.align-items-center
                                .d-flex.justify-content-between.align-items-center
                                    a.mr-2(href=`/profiles/${post.author.email}`)
                                        img.rounded-circle(width="35" src=`${post.author.avatar}` alt="")
                                    .ml-2
                                        .h5.m-0
                                            a(href=`/profiles/${post.author.email}`)= comment.author
                                .text-muted.h7.mb-2
                                    i.fa.fa-clock-o= comment.date

                        .card-body
                            p.card-text= comment.content


                .card-footer.mt-3
                    a.card-link(href="#")
                        i.fa.fa-comment
                        |  Comentar
                        // TODO

    else
        | Nenhuma publicação

    //- Chat (Right bar)
    include chat.pug
